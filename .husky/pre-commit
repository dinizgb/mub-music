#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ—ï¸ğŸ‘· Commit test init...'

# Running Prettier standards
yarn prettier --write . ||
(
    echo 'ğŸ›‘âœ‹ Write Prettier errors found.';
    false;
)

# Check Prettier standards
yarn check-format ||
(
    echo 'ğŸ›‘âœ‹ Styling errors found.';
    false;
)

# Check ESLint Standards
yarn check-lint ||
(
    echo 'ğŸ›‘âœ‹ Lint errors found.';
    false;
)

# Unit tests check
yarn test ||
(
    echo 'ğŸ›‘âœ‹ Unit tests errors found.';
    false;
)

# If everything passes... Now we can commit
echo 'âœ”ï¸âœ”ï¸âœ”ï¸ Style, Lint and Unit test has pass. Initiating NextJS build âš™ï¸...'

yarn build ||
(
    echo 'âŒ Build failed. Aborting commit.';
    false;
)

# If everything passes... Now we can commit
echo 'âœ”ï¸âœ”ï¸âœ”ï¸âœ”ï¸ All test passed! Go ahead and push your commit ğŸš€'